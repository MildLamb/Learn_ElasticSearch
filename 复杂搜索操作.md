# ES复杂的查询操作
- 查询的参数体以json字符串传递
  - query：查询条件
  - _source：指定显示的字段
  - sort：根据某个字段排序
  - 分页：from-从哪开始  size-返回多少数据
```Java
GET mildlamb/_search
{
  //查询参数以json字符串传递
  "query": {  
    "match": {
      "name": "kindred"
    }
  },
  //指定显示的字段,结果的过滤
  "_source": ["name","desc"],
  "sort": [
    {
      "age": {
        //  desc 降序，asc 升序
        "order": "asc"
      }
    }
  ],
  /*
    分页：from-从哪开始,索引下标从0开始
         size-每页显示多少数据
  */
  "from": 0,
  "size": 1
}
```

- 布尔值查询,多条件查询
  - must：所有的条件都要符合，相当于sql中的and
  - should：满足其中一个条件即可，相当于sql中的or
  - must_not：查询不满足条件的数据，相当于not
  - filter：过滤
    - range
      - gt 大于
      - gte 大于等于
      - lt 小于
      - lte 小于等于
```javascript
GET mildlamb/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match": {
            "name": "kindred"
          }
        },
        {
          "match": {
            "age": 1600
          }
        }
      ],
      "filter": [
        {
          "range": {
            "age": {
              "gte": 1550,  //>=
              "lte": 1700   //<=
            }
          }
        }
      ]
    }
  }
}
```






# 查询结果
  - hit:(后面会用java操作这个对象)
    - 索引和文档的信息
    - 查询的结果总数
    - 查询出来的具体文档
    - 匹配分数
```javascript
{
  "took" : 654,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "skipped" : 0,
    "failed" : 0
  },
  "hits" : {
    "total" : {
      "value" : 3,
      "relation" : "eq"
    },
    "max_score" : 0.5662492,
    "hits" : [
      {
        "_index" : "mildlamb",
        "_type" : "_doc",
        "_id" : "1",
        "_score" : 0.5662492,
        "_source" : {
          "name" : "kindred千珏",
          "age" : 1600,
          "desc" : "死亡之灵",
          "tags" : [
            "温柔",
            "灵魂的指路人"
          ]
        }
      },
      {
        "_index" : "mildlamb",
        "_type" : "_doc",
        "_id" : "4",
        "_score" : 0.5662492,
        "_source" : {
          "name" : "小羊kindred",
          "age" : 1500,
          "desc" : "温柔的羊",
          "tags" : [
            "温柔",
            "体贴",
            "可爱"
          ]
        }
      },
      {
        "_index" : "mildlamb",
        "_type" : "_doc",
        "_id" : "2",
        "_score" : 0.45198363,
        "_source" : {
          "name" : "kindred温柔小羊",
          "age" : 9,
          "desc" : "冰封千年的猛兽",
          "tags" : [
            "亢奋",
            "暴怒",
            "可爱"
          ]
        }
      }
    ]
  }
}
```
